V2P，全称为vehicle to people，指的是车辆与行人之间的通讯。这个技术最开始是包含在智能驾驶中的一个分支，用来帮助车辆来判断周围是否有人。当然要判断的不仅仅是只有人，还有其他车辆V2V，有道路标识V2R等等。V2R目前使用很广泛，很多收费口都是用这种远程识别系统，避免了车辆停车缴费，可以自动扣费。目前，V2P，V2R这些技术，统称为V2X，也就是车联网。  

回到正题。V2P是一个什么样的通讯系统呢？如何做到车辆与人的通讯的呢？首先，V2P系统的目的是避免车辆与行人之间的交通事故，避免的方法就是在即将发生事故的时候发出预警。其工作流程为，1，收集双方信息。收集驾驶员和行人的信息。2,预测事故发生，使用算法，数据模型等，推测车辆，行人可能的行车路线。3，发出预警，如果判断下来会发生碰撞，也就是事故，就会报警通知双方。本文也就将从这三个方向出发讨论这个题目。  

首先是收集双方信息。双方的信息包括哪些内容？位置，速度，方向，开的什么车，等等。位置的话，基本上使用的是GPS。包括Yanming的另一个题目"Modelling multipath effects in satellite signals using Machine Learning tools"讲的就是GPS精确定位。而且这个定位是否精准是个非常重要的。在多篇文章中提到GPS定位不准确会极大影响系统效果。速度，方向等信息，主要是通过设备传感器-手机上的传感器收集。交通工具类型，这个是个非常有意思的信息。设想一个场景，如果一个骑自行车的人和一个行人同时在马路上前进，骑自行车的人可能会从后面骑过来，超过了行人，那么是很合理的。但是在系统看来，这是很危险的，类似于追尾。实际上，双方在不同的车道上，是不会有危险的，但系统并不能区分出车道。另外这个信息不太好由系统自行判断，需要用户填写，所以准确性不好保证。

信息收集好了之后，就是预测系统了。系统的预测会基于传感器收集的信息，进行行为轨迹判断。其实这个功能说起来很简单。比如一个行人在横穿马路，一辆车也在马路上开，假设双方不减速，过会儿就会相撞。那么系统就会报警。此处用到的原理也很简单，把双方运动轨迹算出来，看一下后面会不会有重合的可能。但是，光做到这点是不合格的。首先，司机看到行人自然会刹车。如果视野很好距离很远，那么这时候不必要报警。第二，行人如果改变运动倾向，比如停下来了，那也不需要报警。第三，根据用户的道路习惯进行判断，比如用户是属于急躁型的，喜欢冲闯，那么需要报警。如果比较小心的，可以不必报警。等等这些都是一些环境因素。那么看一下目前已有的V2P碰撞预测系统是怎么做的。

首先定义了碰撞危险区域等级。大致为3种，1，不可避免，2，危险，3，安全。继续沿用上面一个例子。当距离很远时（大于安全距离），就算测算出双方会碰撞，但也不必报警。当双方继续保持移动，距离缩小到安全距离以下，会报警。还有一种情况，是报警之后依旧没有改变运动轨迹，此时距离缩短到不可避免碰撞距离，那么继续报警，（但报警似乎显得没有意义？）。其次，对于危险区域的划分，大部分方案给出了不同的数学模型，但其中可变因素分为：驾驶员反应速度，车辆速度，车辆制动能力，路面情况。其他还有一些类似天气因素，能见度等多方面因素也会参与。

最后是警报通知。功能为通知双方即将会发生碰撞。目前有2种做法，1，传统做法，此系统为传统C/S结构，双方等待服务器发送信息。具体就是我的手机下个app，日常数据都是app传给服务器，汽车的数据也是传给服务器，如果有危险，也是服务器那里算出来了告诉手机。这个是实现起来简单，但是实际运行效果不好。不好的原因是服务器响应慢。这个系统如果用户多了，服务器的负荷很难说能不能在1秒之内给出结果（1秒在马路上已经很远了）。2，目前普遍4G，网速不一定能足够快传递消息。这一点5G起来了之后可能会有所改善。3，有些山里没网。

那么看第二种做法。第二种是收集到的数据直接在用户端计算，并且通过一些通讯方式告诉对方通讯方式包括网络，蓝牙，RFID等等，这样就跳过了服务器的限制。那么按照这种C/C客户端直接通讯的结构来看，处理信息的负担以及传输的负担都会大大降低。那么这种结构的难度就在于通讯的稳定性以及距离。目前比较流行的是DSRC和C-V2X。DSRC是基于长距离RFID的微波无线传输技术。这种技术目前可以最大支持1000米的通讯。工作原理是，双方都有接收器和发送器，发送器按一定频率广播信号，接收器可以侦测到附近的人发出的信号。那么一旦侦测到，就可以发送数据。目前这个技术的问题在于，距离过远或者中间有障碍物会导致丢包。

还有一种做法是使用C-V2X。C-V2X全称Cellular-V2X，也叫LTE-V2X，蜂窝V2X。C-V2X比较新，在2016年被首次提出，目前运用极其广泛（可以参考奥迪，福特等车目前的V2X解决方案）。由于这种技术是基于蜂窝网络，又可以实现设备之间的相互通讯，因此它除了可以实现基本的人车通讯，还可以很好地将车辆与道路结合，比如得到红绿灯提示等。这种特性也被业内视作车联网的未来。其网络部署大致如下图。  
![C-V2X](./images/我对V2P系统的一点看法-1.jpg)  
可以看到，车与车之间可以直接通讯。那么对于V2P结构来说，相当于把车替换成人。这种技术的带宽跟DSRC差不多，目前都能到20M左右（其实原理就是wifi）,但是传输延时变低很多，稳定性也好。

最后谈一下蓝牙。蓝牙与V2P系统结合，应该是结合在哪一环呢？我先不做说明，大家可以先看一下蓝牙5.0的特性先考虑一下。
+ 蓝牙5.0针对低功耗设备，有着更广的覆盖范围和速度提升。
+ 蓝牙5.0会加入室内定位辅助功能，结合Wi-Fi可以实现精度小于1米的室内定位。
+ 低功耗模式传输速度上限为2Mbps,是之前4.2LE版本的两倍。
+ 有效工作距离可达300米，是之前4.2LE版本的4倍。
+ 添加导航功能，可以实现1米的室内定位。
+ 为应对移动客户端需求，其功耗更低，且兼容老的版本。  

我认为有3个优势。第一，在GPS无法精确定位的时候，蓝牙可以辅助定位。GPS提供大方向，蓝牙提供具体信息。二，用于传输。其实使用蓝牙完全代替蜂窝网络，我是不赞成的，300米的距离是不够的。但是在一些蜂窝网络无法覆盖的地方，比如隧道，地下，可以使用蓝牙进行辅助传输，这个是个很好的设想。第三就是节能，比网络模块节能这是毋庸置疑的（你手机开蓝牙耗电快还是开热点耗电快）。那么缺点在哪呢？刚刚说了距离300米是有点短，还有就是传输速度。2M/s的速度，关键看数据多不多。如果只是做V2P，我觉得可以。如果是在V2X的主干上，我觉得不行。

最后说一下。我认为没有一个技术是注定没用的，相辅相成是最后的结果。我虽然倾向于蜂窝网络，但是一套V2P的系统，适当的使用DSRC和蓝牙，也是可以弥补一些场景的不足。那么，至于选研究题目和方向，我觉得看到这里，你已经对V2P有了基本的了解，也自然有一些方向想去深入研究，那么这就是这篇文章的主要目的，OK。

# My point of view on V2P system

V2P, the full name is vehicle to people, refers to the communication between vehicles and pedestrians. This technology was originally included in a branch of intelligent driving to help vehicles determine whether there are people around. Of course, it is not only people who have to judge, but also other vehicles V2V, road signs V2R and so on. V2R is currently widely used, and many toll gates use this remote identification system, which avoids vehicle parking fees and can automatically deduct fees. At present, V2P and V2R technologies are collectively referred to as V2X, which is the Internet of Vehicles.

Back to the topic. What kind of communication system is V2P? How to achieve communication between vehicles and people? First of all, the purpose of the V2P system is to avoid traffic accidents between vehicles and pedestrians. The way to avoid it is to issue an early warning when an accident is about to occur. The workflow is: 1. Collect information from both parties. Collect information about drivers and pedestrians. 2. Predict the occurrence of accidents, use algorithms, data models, etc. to infer the possible driving routes of vehicles and pedestrians. 3. A warning is issued. If it is judged that a collision will occur, that is, an accident, an alarm will be issued to notify both parties. This article will discuss this topic from these three directions.

The first is to collect information from both parties. What does the information of both parties include? Location, speed, direction, what car to drive, etc. In terms of location, GPS is basically used. Another topic including Yanming's "Modelling multipath effects in satellite signals using Machine Learning tools" talks about GPS precise positioning. And whether this positioning is accurate is very important. It is mentioned in many articles that inaccurate GPS positioning will greatly affect the effect of the system. Information such as speed and direction is mainly collected through sensors on mobile phones. Type of transportation, this is a very interesting information. Imagine a scenario. If a cyclist and a pedestrian are on the road at the same time, the cyclist may ride from behind and overtake the pedestrian. It is reasonable. But from the system's point of view, this is very dangerous, similar to a rear-end collision. In fact, there is no danger for the two parties in different lanes, but the system cannot distinguish the lanes. In addition, this information is not good to be judged by the system itself and needs to be filled out by the user, so the accuracy is not guaranteed.

After the information is collected, the system will make prediction. The system's predictions will be based on the information collected by the sensors to make behavioral trajectory judgments. In fact, this function is very simple. For example, a pedestrian is crossing a road and a car is driving on the road. Assuming that the two prople do not slow down, they will collide after a while. Then the system will alarm. The principle used here is also very simple. Calculate the trajectories of the two people and see if there is a possibility of overlap later. However, it is not enough to do it on this way. First, the driver will naturally brake when he sees a pedestrian. If the field of view is good and the distance is far, then there is no need to alarm at this time. Second, if pedestrians change their movement action, such as stopping, they do not need to alarm. Third, make judgments based on the user's road habits. For example, if the user is impatient and likes to rush, then it needs to alarm. If you are more careful, you do not need to alarm. These are some environmental factors. Then take a look at how the existing V2P collision prediction system is done.

First, the level of the collision risk area is defined. There are roughly 3 types, 1, inevitable, 2, dangerous, and 3, safe. Continue to use the above example. When the distance is far (greater than the safe distance), even if it is calculated that the two sides will collide, there is no need to alarm. When both parties continue to move and the distance is reduced below the safe distance, an alarm will be issued. In another case, the motion track is still not changed after the alarm, and the distance is shortened to the unavoidable collision distance, then the alarm continues (but this alarm seems meaningless?). Secondly, for the division of dangerous areas, most of the schemes give different mathematical models, but the variable factors are divided into: driver reaction speed, vehicle speed, vehicle braking ability, and road conditions. Other factors like weather and visibility will also be involved.

The last is the alert notification. The function is to notify the two parties that a collision is about to occur. There are currently two methods, 1. Traditional method. This system is a traditional C/S structure, and both parties wait for the server to send information. Specifically, in the next app of my mobile phone, the daily data is transmitted to the server by the app, and the data of the car is also transmitted to the server. If it is dangerous, the server will calculate it and tell the mobile phone. This is simple to implement, but the actual operation effect is not good. The bad reason is that the server responds slowly. If this system has too many users, it is difficult to say whether the server load can give results within 1 second (1 second is already far away on the road). 2. At present, 4G is common, and the network speed may not be fast enough to deliver messages. This may improve after 5G is up. 3. There is no internet in some countryards.

Then look at the second approach. The second is to directly calculate the collected data on the user side, and tell the other party that the communication method includes network, Bluetooth, RFID, etc. through some communication methods, so that the server limitation is skipped. Then according to the structure of direct communication with the C/C client, the burden of processing information and the burden of transmission will be greatly reduced. Then the difficulty of this structure lies in the stability and distance of communication. The more popular ones are DSRC and C-V2X. DSRC is a microwave wireless transmission technology based on long-distance RFID. This technology can currently support up to 1000 meters of communication. The working principle is that both parties have receivers and transmitters. The transmitter broadcasts signals at a certain frequency, and the receiver can detect signals from nearby people. Then once detected, data can be sent. The problem with the current technology is that too far or an obstacle in the middle will cause packet loss.

Another way is to use C-V2X. C-V2X stands for Cellular-V2X, also called LTE-V2X, cellular V2X. C-V2X is relatively new and was first proposed in 2016. It is currently widely used (refer to the current V2X solutions of Audi, Ford and other vehicles). Because this technology is based on a cellular network and can communicate with each other between devices, it can not only realize basic human-vehicle communication, but also integrate vehicles with roads, such as getting traffic lights. This feature is also regarded by the industry as the future of the Internet of Vehicles. The network deployment is roughly as follows.
![C-V2X](./images/我对V2P系统的一点看法-1.jpg)
It can be seen that there can be direct communication between cars. So for the V2P structure, it is equivalent to replacing the car with an adult. The bandwidth of this technology is similar to that of DSRC, and it can reach about 20M (in fact, the principle is wifi), but the transmission delay is much lower and the stability is good.

Finally, talk about Bluetooth. Where should Bluetooth be combined with V2P system? there are some features of Bluetooth 5.0 and consider first.
+ Bluetooth 5.0 is aimed at low-power devices with wider coverage and speed improvements.
+ Bluetooth 5.0 will join the indoor positioning assistance function, combined with Wi-Fi can achieve indoor positioning with an accuracy of less than 1 meter.
+ The upper limit of the transmission speed in low power mode is 2Mbps, which is twice that of the previous 4.2LE version.
+ The effective working distance can reach 300 meters, which is 4 times that of the previous 4.2LE version.
+ Add navigation function to achieve indoor positioning within 1 meter.
+ To meet the needs of mobile clients, it has lower power consumption and is compatible with older versions.

I think there are 3 advantages to use buleteeth. First, when GPS cannot accurately locate, Bluetooth can assist positioning. GPS provides general directions, and Bluetooth provides specific information. Second, for transmission. In fact, using Bluetooth to completely replace the cellular network, I do not approve of it. A distance of 300 meters is not enough. However, in some places where cellular networks cannot cover, such as tunnels and underground, Bluetooth can be used for auxiliary transmission. This is a good idea. The third is energy saving, which is more energy-saving than the network module. This is undoubtedly (your mobile phone uses Bluetooth or hotspots to consume faster power). So where are the disadvantages? I just said that the distance of 300 meters is a bit short, and there is the transmission speed. The speed of 2M/s depends on the amount of data. If you just do V2P, I think it can. If it is on the backbone of V2X, I don't think it will work.

Finally, let’s talk about it. I think that no technology is destined to be useless, and complementarity is the final result. Although I prefer a cellular network, a V2P system, using DSRC and Bluetooth appropriately, can also make up for the shortcomings of some scenarios. So, that's my scope of this topic, OK.